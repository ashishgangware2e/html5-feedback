$(document).ready((function(){var drgArr=drgAttr.split("|"),dragAttrTxt_=dragAttrTxt.split("|"),dragAttrImg_=dragAttrImg.split("|"),randomIndx=[],cnt=0,opt=[];dragCheck=!1;var mousedown={x:0,y:0},bigImage1=[],totalCount=drgArr.length,clickBlock=!0,precodeSplit=precode.split("|"),backImage_=backImage,animateTimer_=animateTimer,backpunchInPlay=!1;function checkURL(url){return null!=url.match(/\.(jpeg|jpg|png)$/)}function shuffleArray(array,indexArr){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),temp=array[i];array[i]=array[j],array[j]=temp;var tem=indexArr[i];indexArr[i]=indexArr[j],indexArr[j]=tem}return array}function findPercentage(vals,outof){return vals/outof*100}function countUpdate(count,totalCount){for(var zindx=50,dvs="",imgArr="",i=0;i<totalCount;i++){var text="";text=checkURL(drgArr[i])?"<img src='"+drgArr[i]+"' width='100%' height='100%' style='position:relative;' data-path='"+bigImage1[i]+"'><div class='popupIcon' data-path='"+bigImage1[i]+"'></div>":"<div class='v-align'><span> "+drgArr[i]+"</span><div class='text-info'>"+dragAttrTxt_[i]+"</div></div>",""!=dragAttrImg?(imgArr+='<div class="img-wrapper" style="z-index:'+zindx+'" data-text-id="lbl'+randomIndx[i]+'"><img   class="main-img" src="'+dragAttrImg_[i]+'" /><img class="zoom-item" src="https://e2eresearch.com/swteam/html5Tools/Astronaut-E/Brand-Target/images/zoomIcon.png" /></div>',dvs+='<div class="stmnt" data-img='+dragAttrImg_[i]+' id="lbl'+randomIndx[i]+'" style="z-index:'+zindx+';">'+text+"</div>",zindx-=1):(imgArr+="",dvs+='<div class="stmnt" id="lbl'+randomIndx[i]+'" style="z-index:'+zindx+';">'+text+"</div>",zindx-=1)}$(".leftdiv").html('<div class="lableTxt"><span>'+Item+" "+(count+1)+" "+of+" "+totalCount+"</span></div>"+dvs+'<div class="img-arr">'+imgArr+"</div>"),centrediv()}function outputvals(bases,hypotns){return Math.sqrt(Math.pow(Math.abs(50-bases),2)+Math.pow(Math.abs(50-hypotns),2))}function centrediv(){$(".txtSpan").html(Brandtxt).css("top",$(".rightdiv").css("height")+"px")}function backpunchValues(){var styleArr=[];$(".dots").each((function(index,e){var getPreCode=$(e).attr("data-precode"),getLeft=$(e).attr("style").split(";")[0].split(":")[1],getTop=$(e).attr("style").split(";")[1].split(":")[1];styleArr[getPreCode-1]=getLeft+":"+getTop})),outBackpunch(styleArr)}if(""!=backImage_&&$(".heart-image").css({"background-image":"url("+backImage_+")","background-repeat":"no-repeat"}),$.each(drgArr,(function(index,arrValue){randomIndx.push(precodeSplit[index])})),countUpdate(cnt,totalCount),$(".rightdiv").bind("click",(function(e){if(!$(e.target).hasClass("dots")&&!$(e.target).hasClass("item-name")){var elName;if($(".ripple").remove(),clickBlock){if(!$(e.target).hasClass("txtSpan")&&!$(e.target).hasClass("rightdiv")&&""==$(e.target).attr("src"))return;$(".ripple").remove(),clickBlock=!1;var posX=$(this).offset().left,posY=$(this).offset().top,buttonWidth=$(this).width(),buttonHeight=$(this).height();$(this).prepend("<span class='ripple'></span>"),buttonWidth>=buttonHeight?buttonHeight=buttonWidth:buttonWidth=buttonHeight;var x=e.pageX-posX-buttonWidth/2,y=e.pageY-posY-buttonHeight/2;$(".ripple").css({width:buttonWidth,height:buttonHeight,top:y+"px",left:x+"px"}).addClass("rippleEffect");var nlft=e.pageX-$(".lableTxt").offset().left-100,ntop=e.pageY-$(".lableTxt").offset().top-50;elName=$("#lbl"+randomIndx[cnt]).find("span").text(),$("#lbl"+randomIndx[cnt]).animate({left:nlft,top:ntop,opacity:0},500,(function(){$(this).hide(),clickBlock=!0})),$("[data-text-id=lbl"+randomIndx[cnt]+"]").remove(),(cnt+=1)>=totalCount&&($(".lableTxt").remove(),$(".rightdiv").off("click")),$(".lableTxt").find("span").html(Item+" "+(cnt+1)+" "+of+" "+totalCount);var offst=$(this).offset(),lftpos=e.pageX-parseInt(offst.left),toppos=e.pageY-parseInt(offst.top),lftPrcnt=parseInt(findPercentage(lftpos,$(this).width())),topPrcnt=parseInt(findPercentage(toppos,$(this).height()));/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$(this).append("<div class='dots' data-precode="+randomIndx[cnt-1]+" style='left:"+(lftPrcnt-3.5)+"%; top:"+(topPrcnt-3.5)+"%;'>&nbsp;<div class='item-cont'><div class='item-name'>"+elName+"</div></div></div>"):$(this).append("<div class='dots' data-precode="+randomIndx[cnt-1]+" style='left:"+(lftPrcnt-2)+"%; top:"+(topPrcnt-2)+"%;'>&nbsp;<div class='item-cont'><div class='item-name'>"+elName+"</div></div></div>");var ranges=outputvals(lftPrcnt,topPrcnt);ranges>50&&(ranges=50),opt[randomIndx[cnt-1]-1]=Math.round(2*ranges),outputValues(opt),0==backpunchInPlay&&backpunchValues()}dragDots()}function dragDots(){1==dragAftrDrp&&($(".item-cont").hide(0),$(".dots").animate({opacity:0},animateTimer_)),2==dragAftrDrp&&$(".item-cont").hide(0),dragAftrDrp,4==dragAftrDrp&&$(".dots").draggable({revert:"invalid",revertDuration:10,stop:function(event,ui){}}).mousedown((function(e){var _x=$(this).offset().left,_y=$(this).offset().top;mousedown.x=e.pageX-_x,mousedown.y=e.pageY-_y}))}})),$("#targetdiv.rightdiv").droppable({drop:function(e,ui){$(".ripple").remove();var posX=$(this).offset().left,posY=$(this).offset().top,buttonWidth=$(this).width(),buttonHeight=$(this).height(),dotX=$(ui.draggable).offset().left+$(ui.draggable).width()/2,dotY=$(ui.draggable).offset().top+$(ui.draggable).height()/2;$(this).prepend("<span class='ripple'></span>"),buttonWidth>=buttonHeight?buttonHeight=buttonWidth:buttonWidth=buttonHeight;var x=dotX-posX-buttonWidth/2,y=dotY-posY-buttonHeight/2,offst=$(this).offset(),lftpos=dotX-parseInt(offst.left),toppos=dotY-parseInt(offst.top),lftPrcnt=parseInt(findPercentage(lftpos,$(this).width())),topPrcnt=parseInt(findPercentage(toppos,$(this).height())),ranges=outputvals(lftPrcnt,topPrcnt);if(ranges>50)$(".ripple").remove(),$(".dots").draggable({revert:"valid"});else if($(".ripple").css({width:buttonWidth,height:buttonHeight,top:y+"px",left:x+"px"}).addClass("rippleEffect"),$(ui.draggable[0]).hasClass("stmnt")){var nlft=dotX-$(".lableTxt").offset().left-100,ntop=dotY-$(".lableTxt").offset().top-50;$("#"+ui.draggable.attr("id")).animate({left:nlft,top:ntop,opacity:0},100,(function(){$(this).draggable("disable")})),(cnt+=1)>=totalCount&&$(".lableTxt").remove(),$(".lableTxt").find("span").html(Item+" "+(cnt+1)+" "+of+" "+totalCount);var arrayIndexForDropOption=ui.draggable.attr("id").split("lbl")[1];arrayIndexForDropOption=parseInt(arrayIndexForDropOption)-1,opt[arrayIndexForDropOption]=Math.round(2*ranges),outputValues(opt),0==backpunchInPlay&&backpunchValues(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?$(this).append("<div class='dots' style='left:"+(lftPrcnt-8)+"%; top:"+(topPrcnt-8)+"%;'>"+ui.draggable.attr("show-drop-value")+"</div>"):$(this).append("<div class='dots' style='left:"+(lftPrcnt-3)+"%; top:"+(topPrcnt-3)+"%;'>"+ui.draggable.attr("show-drop-value")+"</div>"),dragDots()}else{var leftPos="",topPos="";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(leftPos=lftPrcnt-3.5,topPos=topPrcnt-3.5):(leftPos=lftPrcnt-2,topPos=topPrcnt-2),$(ui.draggable).css({left:leftPos+"%",top:topPos+"%"});var getPre,updateIndex=+$(ui.draggable).attr("data-precode")-1;opt[updateIndex]=2*ranges>99?100:Math.round(2*ranges),outputValues(opt),0==backpunchInPlay&&backpunchValues(),$(".dots").draggable({revert:"invalid"})}},out:function(){$(".dots").draggable({revert:!0})},over:function(){}}),$(window).resize((function(){centrediv()})),$(".stmnt .popupIcon").click((function(){if(!dragCheck){var path=$(this).attr("data-path");$(".wrapper.row-of-icons").append("<div class='imagePopup'><div class='imgBox'><img src='"+path+"'><span class='cross'></span></div></div>")}$(".imagePopup .imgBox .cross").show(0),$(".imagePopup,.cross").click((function(){$(".imagePopup").remove()}))})),$(".wrapper").append('<div id="cus-myModal" class="cus-modal"><div class="cst-model"><span class="close">&times;</span><img class="modal-content" ></div></div>'),$(".zoom-item").click((function(){var imgSrc=$(this).parent().find(".main-img").attr("src");$(".modal-content").attr("src",imgSrc),$(".cus-modal").show(0)})),$(".close").click((function(){$(".cus-modal").hide(0)})),1==backpunch){$("body").css("opacity",0),backpunchInPlay=!0;var positions_=positions.split(",");outputsvalue.split(",").forEach((function(el,index){clickBlock=!0,$(".rightdiv").click()})),outputsvalue.split(",").forEach((function(el,index){var leftPos=positions_[index].split(":")[0],topPos=positions_[index].split(":")[1];$(".dots[data-precode="+[index+1]+"]").css({left:leftPos,top:topPos})})),backpunchInPlay=!1,setTimeout((function(){$("body").css("opacity",1)}),1e3),outputValues(outputsvalue),outBackpunch(positions),outputsvalue.split(",").forEach((function(el,index){opt[index]=el}))}}));