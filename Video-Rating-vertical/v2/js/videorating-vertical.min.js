$(document).ready((function(){function widget(){$(".video-container").append('<div class="panel videoPanel">    <div class="video-rating-panel">        <video playsinline preload="auto" id="ratingVideo"  src='+videoSource.split("|")[0]+">  <source src="+videoSource.split("|")[0]+' type="video/mp4">  <source src='+videoSource.split("|")[1]+' type="video/webm">  <source src='+videoSource.split("|")[2]+' type="video/ogg">  <p>Your user agent does not support the HTML5 Video element.</p>  </video>        <div id="btnPlay" class="play"><div class="play-btn-inr"></div></div>    </div>    <div class="durationBlock">        <div class="remaingTimeBlock"><span id="curtimetext">00:00</span> / <span id="durtimetext">00:00</span></div>    </div>    <div class="ratingBlock" style="display:none;"></div>  </div>  <div class="panel sliderPanel">    <div id="pips-slider">    <div class="str-agree label-text"><div class="emo-label"><img src="images/Strongly_Agree.svg" alt="Very Interested"/></div></div>    <div class="agree  label-text"><div class="emo-label"><img src="images/Agree.svg" alt="Neutral"/></div></div>    <div class="neither_agree  label-text"><div class="emo-label"><img src="images/Neither_agree.svg" alt="not-interested"/></div></div>    <div class="disagree  label-text"><div class="emo-label"><img src="images/Disagree.svg" alt="not-interested"/></div></div>    <div class="strongly_Disagree  label-text"><div class="emo-label"><img src="images/Strongly_Disagree.svg" alt="not-interested"/></div></div>    </div>  </div>'),$(".video-container").before('<div class="title-toll">'+widget_title+'</div> <div class="loader-overlay"><div class="loader">Loading...</div></div><div class="errormsg">'+errorMsg+"</div>");var ourArr=[],prvValVideo,currentValVideo,videos=document.querySelectorAll("video"),behavior=document.querySelector("#behavior"),currentId=0,recordVal=[],minutes,clickValue=0;function enableButtons(video){var playBtn=video.parentNode.querySelector(".play"),fullscreenButton=video.parentNode.querySelector(".fullscreen");playBtn&&playBtn.addEventListener("click",(function(){$("#pips-slider").slider("enable"),video.paused?(video.play(),$(".play").hide(),prvValVideo=1):video.pause()})),fullscreenButton&&fullscreenButton.addEventListener("click",(function(){video.webkitEnterFullScreen()}))}function intializePlayer(){video=document.getElementById("ratingVideo"),playbtn=document.getElementById("playpausebtn"),curtimetext=document.getElementById("curtimetext"),durtimetext=document.getElementById("durtimetext"),video.addEventListener("timeupdate",seektimeupdate,!0)}function seektimeupdate(){var curmins=Math.floor(video.currentTime/60),cursecs=Math.floor(video.currentTime-60*curmins),durmins=Math.floor(video.duration/60),dursecs=Math.floor(video.duration-60*durmins);cursecs<10&&(cursecs="0"+cursecs),dursecs<10&&(dursecs="0"+dursecs),curmins<10&&(curmins="0"+curmins),durmins<10&&(durmins="0"+durmins),curtimetext.innerHTML=curmins+":"+cursecs,durtimetext.innerHTML=durmins+":"+dursecs}function debugEvents(video){["loadstart","progress","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","timeupdate","play","pause","webkitbeginfullscreen","webkitendfullscreen"].forEach((function(event){video.addEventListener(event,(function(){}))}))}function enableVideos(everywhere){for(var i=0;i<videos.length;i++)window.makeVideoPlayableInline(videos[i],!videos[i].hasAttribute("muted"),!everywhere),enableButtons(videos[i]),debugEvents(videos[i])}function getData(){var timeout;function performaction(currentTime,duration){recordVal.push(currentTime+":"+currentId),recordeddata(recordVal)}$(".errormsg").hide(),$("#ratingVideo").on("playing pause",(function(e){var v=this;clearTimeout(timeout),minutesN=v.currentTime.toString().split(".")[0],performaction(minutesN,v.duration),"playing"===e.type&&setTimeout((function(){timeout=setInterval((function(){performaction(minutes=v.currentTime.toString().split(".")[0],v.duration)}),1e3)}),100)}))}function func(){var h=parseInt($("#ratingVideo").css("height")),height=parseInt($(".sliderPanel").css("height"));$(".video-container .panel").css({height:h+"px"}),$(".str-agree").css({top:"0%"}),$(".agree").css({top:"23%"}),$(".neither_agree").css({top:"48%"}),$(".disagree").css({top:"73%"}),$(".strongly_Disagree").css({top:"100%"})}"?enabled=false"===location.search?behavior.innerHTML="(module disabled everywhere via <code>?enabled=false</code>":"?enabled=true"===location.search?(enableVideos(!0),behavior.innerHTML="(module enabled everywhere (whether itâ€™s necessary or not) via <code>?enabled=true</code>)"):enableVideos(),window.addEventListener("load",(function(){var videoloadS=document.querySelector("#ratingVideo");function checkLoad(){4===videoloadS.readyState||setTimeout(checkLoad,100)}checkLoad()}),!1),window.onload=intializePlayer,$("#ratingVideo").on("ended",(function(){$("#EndData").val("1"),$("#pips-slider").slider("disable"),1==clickValue?$(".play").hide():$(".play").show(),setTimeout((function(){1==$("#EndData").val()&&1==$("#clickval").val()?$("#forwardbutton").show():$(".errormsg").show()}),500)})),$("#ratingVideo").on("play",(function(){recordVal=[],$(".errormsg").hide(),$(".ratingElement").removeAttr("style"),$("#EndData").val("0"),$("#clickval").val("0"),clickValue=0,currentId=defaultrate})),getData(),$("#pips-slider").slider({range:!1,min:1,max:5,values:defaultrate,orientation:"vertical",step:1,stop:function(event,ui){$("#clickval").val("1"),currentId=ui.value,clickValue=1},change:function(event,ui){var lbloneval=$(".ui-slider-pip-selected .ui-slider-label").attr("data-value");1==lbloneval?$(".strongly_Disagree .emo-label").addClass("lbl-zom"):$(".strongly_Disagree .emo-label").removeClass("lbl-zom"),2==lbloneval?$(".disagree .emo-label").addClass("lbl-zom"):$(".disagree .emo-label").removeClass("lbl-zom"),3==lbloneval?$(".neither_agree .emo-label").addClass("lbl-zom"):$(".neither_agree .emo-label").removeClass("lbl-zom"),4==lbloneval?($(".agree .emo-label").addClass("lbl-zom"),$(".neutral .emo-label").removeClass("lbl-zom")):$(".agree .emo-label").removeClass("lbl-zom"),5==lbloneval?$(".str-agree .emo-label").addClass("lbl-zom"):$(".str-agree .emo-label").removeClass("lbl-zom")}}).slider("pips",{first:"label",last:"label",rest:"label",step:1,labels:!1,prefix:"",suffix:""}).slider("float",{handle:!0,pips:!1,labels:!1,prefix:"",suffix:""}),$("#pips-slider").slider("disable"),$("#pips-slider").slider("value",defaultrate),$(window).resize((function(){func()})),$(window).trigger("resize"),$(".ui-slider-pip.ui-slider-pip-first").css("bottom","1%"),$(".ui-slider-pip.ui-slider-pip-last").css("bottom","99%"),$(".ui-slider-pip.ui-slider-pip-last .ui-slider-line").css("top","30%"),$(".ui-slider-pip.ui-slider-pip-first .ui-slider-line").css("top","58%");var inter=setInterval((function(){"complete"==document.readyState&&(clearInterval(inter),$(".loader-overlay").remove(),$(".video-container").removeAttr("style"))}),100),intera=setInterval((function(){var vid=document.getElementById("ratingVideo");3!=vid.readyState&&4!=vid.readyState||(clearInterval(intera),func())}),100)}widget()}));